<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>紫微斗数</title>

    <style>
        * {
            margin: 0;
            padding: 0;
        }

        .formclass {
            text-align: center;
            height: 30px;
        }

        .classy, .classm, .classd, .classh, .classsex, .btnsub {
            height: 0.9cm
        }

        table {
            table-layout: fixed;
            word-break: break-all;
            border-collapse: collapse;
            text-align: center;
        }

        .table tr {
            border: none;
        }

        .table td {
            width: 200px;
            height: 200px;
            border: 1px inset blue;
        }

        .table td:hover {
            cursor: pointer;
            border: 1px outset red;
        }

        .right {
            position: absolute;
            left: 40%;
            top: 50px
        }
    </style>
</head>

<body>
<div style="text-align: center;">
    <form action="" class="formclass" id="froid" method="POST" name="form" onsubmit="return foremost()">
        <!-- 下拉年 -->
        <select name="ly" id="yearid" class="classy" onchange="selectY()">
            <script>
                var d = new Date();
                var year = d.getFullYear();
                var yearSelect = document.getElementById("yearid");
                for (var i = 1601; i <= 3498; i++) {
                    var opt = document.createElement("option");
                    opt.value = i;
                    opt.text = i + "年";
                    yearSelect.appendChild(opt);
                }
                //添加select到表单
                document.body.appendChild(document.getElementById("froid"));

                //默认显示本年数字
                document.getElementsByName("ly")[0].value = year;
            </script>
        </select>
        <!-- 下拉月份 -->
        <select id="monthid" name="lm" class="classm">
            <script>
                var monthSelect = document.getElementById("monthid");
                for (var i = 1; i <= 12; i++) {
                    var opt = document.createElement("option");
                    opt.value = i;
                    opt.text = i + "月";
                    monthSelect.appendChild(opt);
                }
                document.body.appendChild(document.getElementById("froid"));
                document.getElementsByName("lm")[0].value = d.getMonth() + 1;
            </script>
        </select>
        <!-- 下拉日期 -->
        <select id="dayid" name="ld" class="classd">
            <script>
                var dSelect = document.getElementById("dayid");
                for (var i = 1; i <= 31; i++) {
                    var opt = document.createElement("option"); //生成option
                    opt.value = i;
                    opt.text = i + "日";
                    dSelect.appendChild(opt);
                }
                document.body.appendChild(document.getElementById("froid"));
                document.getElementsByName("ld")[0].value = d.getDate();
            </script>
        </select>
        <!-- 时辰 子时1 丑时2 寅时3... -->
        <select id="hourid" name="lh" class="classh">
            <script>
                var hSelect = document.getElementById("hourid");
                for (var i = 0; i <= 23; i++) {
                    var opt = document.createElement("option");
                    opt.value = i;
                    opt.text = i + "点";
                    hSelect.appendChild(opt);
                }
                document.body.appendChild(document.getElementById("froid"));
                document.getElementsByName("lh")[0].value = d.getHours();
            </script>
        </select>
        <select id="sex" name="sex" class="classsex">
            <option id="nan" value="男">男</option>
            <option id="nv" value="女">女</option>
        </select>
        <button class="btnsub" onclick="sub()">查看</button>
    </form>
</div>

<!--
    巳  午  未 申
 	辰		  酉
    卯		  戌
    寅  丑  子 亥
-->
<table class="table">

    <tr>
        <td id="si">巳</td>
        <td id="wu">午</td>
        <td id="wei">未</td>
        <td id="shen">申</td>
    </tr>
    <tr>
        <td id="chen">辰</td>
        <td id="x11" style="border: 3px outset white;font-size: 14px">x11</td>
        <td id="x12" style="border: 3px outset white;">x12</td>
        <td id="you">酉</td>
    </tr>
    <tr>
        <td id="mao">卯</td>
        <td id="x1" style="border: 3px outset white;">x1</td>
        <td id="x2" style="border: 3px outset white;">x2</td>
        <td id="xu">戌</td>
    </tr>
    <tr>
        <td id="yin">寅</td>
        <td id="chou">丑</td>
        <td id="zi">子</td>
        <td id="hai">亥</td>
    </tr>
</table>

<div class="right">
    <p id="l1" style="font-size: 28px;text-align: center"></p>
    <p id="p2">pp</p>
</div>

<script src="https://s3.pstatp.com/cdn/expire-1-M/jquery/3.2.1/jquery.min.js"></script>
<script>
    function foremost() {
        $.ajax({
            type: "POST",
            dataType: "json",
            url: "/zw",
            data: $('#froid').serialize(),
            success: function (e) {
                var js = JSON.parse(e)
                var px11 = document.getElementById("x11")
                px11.innerHTML = js.solar + "<br>" + js.gz + "<br>" + js.moon;
                var px12 = document.getElementById("x12")
                px12.innerHTML = "性别:" + js.sex + "<br>" + "命主:" + js.ming_zhu + "<br>" + "身主:" + js.shen_zhu + "<br>" + "五行:" + js.wu_xing;
                var sihua = document.getElementById("x1")
                sihua.innerHTML = js.si_hua;
                //
                var haip = document.getElementById("hai")
                haip.innerHTML = ""
                for (var i = 0; i < js.hai.length; i++) {
                    if (js.hai[i] !== "") {
                        haip.innerHTML += "<br>" + js.hai[i]
                    }
                }
                //
                var zip = document.getElementById("zi")
                zip.innerHTML = ""
                for (i = 0; i < js.zi.length; i++) {
                    if (js.zi[i] !== "") {
                        zip.innerHTML += "<br>" + js.zi[i]
                    }
                }
                //
                var choup = document.getElementById("chou")
                choup.innerHTML = ""
                for (i = 0; i < js.chou.length; i++) {
                    if (js.chou[i] !== "") {
                        choup.innerHTML += "<br>" + js.chou[i]
                    }
                }
                //
                var yinp = document.getElementById("yin")
                yinp.innerHTML = ""
                for (i = 0; i < js.yin.length; i++) {
                    if (js.yin[i] !== "") {
                        yinp.innerHTML += "<br>" + js.yin[i]
                    }
                }
                //
                var maop = document.getElementById("mao")
                maop.innerHTML = ""
                for (i = 0; i < js.mao.length; i++) {
                    if (js.mao[i] !== "") {
                        maop.innerHTML += "<br>" + js.mao[i]
                    }
                }
                //
                var chenp = document.getElementById("chen")
                chenp.innerHTML = ""
                for (i = 0; i < js.chen.length; i++) {
                    if (js.chen[i] !== "") {
                        chenp.innerHTML += "<br>" + js.chen[i]
                    }
                }
                //
                var sip = document.getElementById("si")
                sip.innerHTML = ""
                for (i = 0; i < js.si.length; i++) {
                    if (js.si[i] !== "") {
                        sip.innerHTML += "<br>" + js.si[i]
                    }
                }
                //
                var wup = document.getElementById("wu")
                wup.innerHTML = ""
                for (i = 0; i < js.wu.length; i++) {
                    if (js.wu[i] !== "") {
                        wup.innerHTML += "<br>" + js.wu[i]
                    }
                }
                //
                var weip = document.getElementById("wei")
                weip.innerHTML = ""
                for (i = 0; i < js.wei.length; i++) {
                    if (js.wei[i] !== "") {
                        weip.innerHTML += "<br>" + js.wei[i]
                    }
                }
                //
                var shenp = document.getElementById("shen")
                shenp.innerHTML = ""
                for (i = 0; i < js.shen.length; i++) {
                    if (js.shen[i] !== "") {
                        shenp.innerHTML += "<br>" + js.shen[i]
                    }
                }
                //
                var youp = document.getElementById("you")
                youp.innerHTML = ""
                for (i = 0; i < js.you.length; i++) {
                    if (js.you[i] !== "") {
                        youp.innerHTML += "<br>" + js.you[i]
                    }
                }
                //
                var xup = document.getElementById("xu")
                xup.innerHTML = ""
                for (i = 0; i < js.xu.length; i++) {
                    if (js.xu[i] !== "") {
                        xup.innerHTML += "<br>" + js.xu[i]
                    }
                }
            }
        });
        return false;
    }
</script>
</body>

</html>
